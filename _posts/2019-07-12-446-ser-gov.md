---
layout: post
title: 最佳实践：容器部署weathermap
pid: 445
tags: [servicestage, k8s, 微服务]
---

# 进入服务治理界面

+ 打开ServiceStage，选择 “基础设施 > 微服务引擎（CSE）”，单击 查看控制台
+ 选择 “服务治理”，单击 “weathermap”

![](/uploads/2019/07/12-01.png)

![](/uploads/2019/07/12-02.png)

# 负载均衡

+ “当前城市紫外线” 是 weather#0.0.3提供的新功能
+ 默认微服务weather#0.0.2 和 微服务weather#0.0.3 是轮询的


![](/uploads/2019/07/12-03.png)

![](/uploads/2019/07/12-04.png)

# 降级

+ 下线微服务

![](/uploads/2019/07/12-05.png)

![](/uploads/2019/07/12-06.png)

# 灰度发布

+ 可以认为是流量控制
+ 指定shenzhen才有紫外线功能
+ 选择 weather#0.0.3

![](/uploads/2019/07/12-07.png)

+ 单击 weather#0.0.3

![](/uploads/2019/07/12-08.png)

+ 单击 “灰度发布”
+ 新建规则

![](/uploads/2019/07/12-09.png)

+ 查看结果

![](/uploads/2019/07/12-10.png)

![](/uploads/2019/07/12-11.png)


# 限流

+ 设定阈(yu)值

![](/uploads/2019/07/12-12.png)

+ 打开云性能测试服务

https://console.huaweicloud.com/cpts

+ 进行限流


